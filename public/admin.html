<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Manforia Reading Tracker</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="cropped-cropped-icon2.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">
            <img src="cropped-cropped-icon2.png" alt="Logo" class="nav-logo">
            <span>Manforia Reading Tracker - Admin</span>
        </div>
        <div class="nav-actions">
            <span id="adminName" class="user-name"></span>
            <a href="/logout" class="btn btn-secondary"><i class="fas fa-sign-out-alt"></i> Logout</a>
        </div>
        <button class="hamburger" id="hamburgerBtn">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </nav>

    <!-- Mobile Overlay -->
    <div class="mobile-overlay" id="mobileOverlay"></div>

    <!-- Mobile Sidebar -->
    <div class="mobile-sidebar" id="mobileSidebar">
        <div class="sidebar-header">
            <img src="cropped-cropped-icon2.png" alt="Logo" style="width: 60px; height: 45px;">
            <button class="sidebar-close" id="sidebarClose">&times;</button>
        </div>
        
        <div class="sidebar-user-info">
            <div class="user-name" id="sidebarAdminName">Administrator</div>
            <div class="user-role">Admin Panel</div>
        </div>
        
        <div class="sidebar-nav">
            <button class="tab-btn active" onclick="showTabMobile('teachers')"><i class="fas fa-users"></i> Manage Teachers</button>
            <button class="tab-btn" onclick="showTabMobile('daily-reports')"><i class="fas fa-calendar-day"></i> Daily Reports</button>
            <button class="tab-btn" onclick="showTabMobile('weekly-reports')"><i class="fas fa-calendar-week"></i> Weekly Reports</button>
            <a href="/logout" class="btn btn-secondary" style="margin-top: 20px;"><i class="fas fa-sign-out-alt"></i> Logout</a>
        </div>
    </div>

    <div class="container">
        <div class="dashboard-tabs">
            <button class="tab-btn active" onclick="showTab('teachers')"><i class="fas fa-users"></i> Manage Teachers</button>
            <button class="tab-btn" onclick="showTab('daily-reports')"><i class="fas fa-calendar-day"></i> Daily Reports</button>
            <button class="tab-btn" onclick="showTab('weekly-reports')"><i class="fas fa-calendar-week"></i> Weekly Reports</button>
        </div>

        <!-- Teachers Management Tab -->
        <div id="teachers-tab" class="tab-content active">
            <div class="section-header">
                <h2>Manage Teachers</h2>
                <button class="btn btn-primary" onclick="showAddTeacherModal()"><i class="fas fa-user-plus"></i> Add New Teacher</button>
            </div>
            
            <div class="table-container">
                <table id="teachersTable" class="data-table">
                    <thead>
                        <tr>
                            <th>Full Name</th>
                            <th>Username</th>
                            <th>Assigned Class</th>
                            <th>Created Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- Daily Reports Tab -->
        <div id="daily-reports-tab" class="tab-content">
            <div class="section-header">
                <h2>Daily Reading Reports</h2>
                <button class="btn btn-primary" onclick="exportDailyReportsPDF()"><i class="fas fa-file-pdf"></i> Export PDF</button>
            </div>
            
            <div class="table-container">
                <table id="dailyReportsTable" class="data-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Teacher</th>
                            <th>Class</th>
                            <th>Materials Used</th>
                            <th>New Words</th>
                            <th>Comments</th>
                            <th>Week</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- Weekly Reports Tab -->
        <div id="weekly-reports-tab" class="tab-content">
            <div class="section-header">
                <h2>Weekly Summary Reports</h2>
                <button class="btn btn-primary" onclick="exportWeeklyReportsPDF()"><i class="fas fa-file-pdf"></i> Export PDF</button>
            </div>
            
            <div class="table-container">
                <table id="weeklyReportsTable" class="data-table">
                    <thead>
                        <tr>
                            <th>Submitted</th>
                            <th>Teacher</th>
                            <th>Class</th>
                            <th>Week</th>
                            <th>Active Readers</th>
                            <th>Support Needed</th>
                            <th>Challenges</th>
                            <th>Strategies</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
    </div>

    <!-- Add Teacher Modal -->
    <div id="addTeacherModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Teacher</h3>
                <span class="close" onclick="closeAddTeacherModal()">&times;</span>
            </div>
            <form id="addTeacherForm">
                <div class="form-group">
                    <label for="teacherFullName">Full Name</label>
                    <input type="text" id="teacherFullName" name="fullName" required>
                </div>
                
                <div class="form-group">
                    <label for="teacherUsername">Username</label>
                    <input type="text" id="teacherUsername" name="username" required>
                </div>
                
                <div class="form-group">
                    <label for="teacherPassword">Password</label>
                    <input type="password" id="teacherPassword" name="password" required>
                </div>
                
                <div class="form-group">
                    <label for="assignedClass">Assigned Class</label>
                    <input type="text" id="assignedClass" name="assignedClass" placeholder="e.g., Basic 1, Basic 6A, Basic 6B" required>
                    <small style="color: var(--gray-medium); font-size: 12px; margin-top: 5px; display: block;">
                    </small>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeAddTeacherModal()"><i class="fas fa-times"></i> Cancel</button>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-user-plus"></i> Add Teacher</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmationModal" class="confirmation-modal">
        <div class="confirmation-modal-content">
            <div class="confirmation-modal-header">
                <span class="icon"><i class="fas fa-exclamation-triangle"></i></span>
                <h3>Confirm Deletion</h3>
            </div>
            <div class="confirmation-modal-body">
                <p>Are you sure you want to delete this teacher?</p>
                <div class="teacher-info">
                    <strong>Teacher:</strong> <span id="deleteTeacherName"></span><br>
                    <strong>Class:</strong> <span id="deleteTeacherClass"></span>
                </div>
                <p style="color: var(--error); font-weight: 500;">This action cannot be undone!</p>
            </div>
            <div class="confirmation-modal-actions">
                <button class="btn-cancel" onclick="closeConfirmationModal()"><i class="fas fa-times"></i> Cancel</button>
                <button class="btn-confirm" onclick="confirmDeleteTeacher()"><i class="fas fa-trash"></i> Delete</button>
            </div>
        </div>
    </div>

    <!-- Report View Modal -->
    <div id="reportModal" class="report-modal">
        <div class="report-modal-content">
            <div class="report-modal-header">
                <h2><span class="report-icon" id="reportIcon"><i class="fas fa-clipboard-list"></i></span><span id="reportTitle">Report Details</span></h2>
                <button class="report-close" onclick="closeReportModal()">&times;</button>
            </div>
            <div class="report-modal-body">
                <div class="report-info-grid" id="reportInfoGrid">
                    <!-- Dynamic content will be inserted here -->
                </div>
                <div id="reportContentSections">
                    <!-- Dynamic content sections will be inserted here -->
                </div>
            </div>
            <div class="report-modal-footer">
                <div class="report-date-info" id="reportDateInfo">
                    <!-- Date information will be inserted here -->
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>

    <script src="admin.js"></script>
</body>
</html>
